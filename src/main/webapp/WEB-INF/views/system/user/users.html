#set($page_title="帐号管理")
<div class="row">
	<div class="col-lg-12">
		<div class="panel panel-default">
			<div class="panel-heading">
				<form class="form-inline" id="searchForm" method="get"
					action="$link.getContextPath()/user/page">
					<input type="hidden" name="pageNo" id="pageNo" value="">
					<div class="form-group">
						<label for="username">姓名：</label> <input type="text"
							maxlength="20" class="form-control" id="username" name="username"
							placeholder="请输入姓名">
					</div>
					<div class="form-group">
						<label for="email">邮箱：</label> <input type="email" maxlength="128"
							class="form-control" id="email" name="email" placeholder="请输入邮箱">
					</div>
					<button type="button" class="btn btn-default" id="searchBtn">查询</button>
					<button type="reset" class="btn btn-default">重置</button>
					<button type="button" class="btn btn-default" id="newBtn">新增</button>
				</form>
			</div>
			<div class="panel-body">
				<div class="table-responsive" id="result"></div>
			</div>
		</div>
	</div>
</div>

<script type="text/javascript">
	function toPage(pageNo) {
		console.debug(pageNo);
		$("#pageNo").val(pageNo);
		$("#searchForm").ajaxSubmit({
			success : function(data) {
				$("#result").html(data);
			}
		});
	}
	function show(uid) {
		$("#myModal").modal('toggle');
		$("#myModalLabel").html("修改用户");
		$("#myModalBody").html("正在打开...");
		$.get("$link.getContextPath()/user/show?uid=" + uid, function(data) {
			$("#myModalBody").html(data);
		});
	}
	function ban(uid) {
		$.post("$link.getContextPath()/user/ban", {
			"uid" : uid
		}, function(data) {
			toPage();
		});
	}
	$(document).ready(function() {
		toPage(1);
		$("#searchBtn").click(function() {
			toPage(1);
		});
		$("#myModalBtn").click(function() {
			$("#userForm").ajaxSubmit({
				success : function(data) {
					$("#myModal").modal('toggle');
					toPage();
				}
			});
		});
	});
</script>